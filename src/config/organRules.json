{
  "version": "1.0.0",
  "liver": {
    "organ": "liver",
    "description": "Liver glucose transfer rules - controls glucose release from liver buffer to bloodstream",
    "rules": [
      {
        "id": "liver_boost_active",
        "description": "Liver boost forces maximum transfer rate",
        "priority": 1,
        "condition": {
          "type": "boost",
          "boost": "liverBoost",
          "state": "active"
        },
        "action": {
          "type": "setTier",
          "tier": 3
        }
      },
      {
        "id": "bg_critical_stop",
        "description": "Stop release when blood glucose is critical (>=300)",
        "priority": 2,
        "condition": {
          "type": "container",
          "container": "bg",
          "operator": ">=",
          "value": 300
        },
        "action": {
          "type": "setTier",
          "tier": 0
        }
      },
      {
        "id": "bg_high_release",
        "description": "Strong release when blood glucose is high (>=250)",
        "priority": 3,
        "condition": {
          "type": "container",
          "container": "bg",
          "operator": ">=",
          "value": 250
        },
        "action": {
          "type": "setTier",
          "tier": 3
        }
      },
      {
        "id": "bg_elevated_release",
        "description": "Moderate release when blood glucose is elevated (>150)",
        "priority": 4,
        "condition": {
          "type": "container",
          "container": "bg",
          "operator": ">",
          "value": 150
        },
        "action": {
          "type": "setTier",
          "tier": 2
        }
      },
      {
        "id": "bg_low_release",
        "description": "Release glucose when blood glucose is low (<=100)",
        "priority": 5,
        "condition": {
          "type": "container",
          "container": "bg",
          "operator": "<=",
          "value": 100
        },
        "action": {
          "type": "setTier",
          "tier": 1
        }
      },
      {
        "id": "default_stop",
        "description": "Default: no release (BG 101-150 normal range)",
        "priority": 6,
        "condition": {
          "type": "default"
        },
        "action": {
          "type": "setTier",
          "tier": 0
        }
      }
    ],
    "modifiers": [],
    "rates": [0, 100, 50, 75],
    "minTier": 0,
    "maxTier": 3
  },
  "pancreas": {
    "organ": "pancreas",
    "description": "Pancreas insulin regulation - controls muscle glucose utilization by monitoring blood glucose",
    "rules": [
      {
        "id": "bg_critical_reaction",
        "description": "Critical BG (>=300) - Strong insulin secretion at Tier 4",
        "priority": 1,
        "condition": {
          "type": "container",
          "container": "bg",
          "operator": ">=",
          "value": 300
        },
        "action": {
          "type": "setTier",
          "tier": 4
        }
      },
      {
        "id": "bg_very_high_reaction",
        "description": "Very high BG (>=200) - Moderate insulin secretion at Tier 3",
        "priority": 2,
        "condition": {
          "type": "container",
          "container": "bg",
          "operator": ">=",
          "value": 200
        },
        "action": {
          "type": "setTier",
          "tier": 3
        }
      },
      {
        "id": "bg_high_reaction",
        "description": "High BG (>=150) - Elevated insulin secretion at Tier 2",
        "priority": 3,
        "condition": {
          "type": "container",
          "container": "bg",
          "operator": ">=",
          "value": 150
        },
        "action": {
          "type": "setTier",
          "tier": 2
        }
      },
      {
        "id": "bg_low_reaction",
        "description": "Low BG (<=80) - Disable insulin secretion",
        "priority": 4,
        "condition": {
          "type": "container",
          "container": "bg",
          "operator": "<=",
          "value": 80
        },
        "action": {
          "type": "setTier",
          "tier": 0
        }
      },
      {
        "id": "default_basal",
        "description": "Normal BG (80-150) - Basal insulin at Tier 1",
        "priority": 5,
        "condition": {
          "type": "default"
        },
        "action": {
          "type": "setTier",
          "tier": 1
        }
      }
    ],
    "modifiers": [
      {
        "id": "fast_insulin",
        "description": "Fast Insulin boost increases tier (ignores degradation)",
        "type": "boost",
        "condition": {
          "type": "boost",
          "boost": "pancreasBoost",
          "state": "active"
        },
        "effect": {
          "type": "addTier",
          "amount": 1
        },
        "ignoresDegradation": true
      }
    ],
    "rates": [0, 1, 2, 3, 4, 5],
    "minTier": 0,
    "maxTier": 5
  },
  "muscles": {
    "organ": "muscles",
    "description": "Muscle glucose utilization - receives tier assignment from pancreas",
    "rules": [],
    "modifiers": [
      {
        "id": "exercise_bonus",
        "description": "Exercise increases drain tier (only when muscles activated by pancreas)",
        "type": "effect",
        "minBaseTier": 1,
        "condition": {
          "type": "effect",
          "container": "exerciseEffect",
          "operator": ">",
          "value": 50
        },
        "effect": {
          "type": "addTier",
          "amount": 1
        }
      },
      {
        "id": "intense_exercise_bonus",
        "description": "Intense Exercise permanent muscle tier boost (only when muscles activated)",
        "type": "effect",
        "minBaseTier": 1,
        "condition": {
          "type": "effect",
          "container": "intenseExerciseEffect",
          "operator": ">",
          "value": 0
        },
        "effect": {
          "type": "addTier",
          "amount": 1
        }
      },
      {
        "id": "fast_insulin",
        "description": "Fast Insulin increases drain tier (ignores degradation)",
        "type": "boost",
        "condition": {
          "type": "boost",
          "boost": "pancreasBoost",
          "state": "active"
        },
        "effect": {
          "type": "addTier",
          "amount": 1
        },
        "ignoresDegradation": true
      }
    ],
    "rates": [0, 25, 50, 85, 120, 150, 175],
    "minTier": 0,
    "maxTier": 5,
    "boostedMaxTier": 6
  }
}
