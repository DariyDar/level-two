.pipe-system {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
}

.pipe-system__svg {
  width: 100%;
  height: 100%;
}

/* All pipe strokes use non-scaling to keep consistent pixel width */
.pipe-wall,
.pipe-fill {
  vector-effect: non-scaling-stroke;
}

/* Pipe wall — always visible */
.pipe-wall {
  fill: none;
  stroke: #4a5568;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* Pipe inner fill — inactive (empty) */
.pipe-fill {
  fill: none;
  stroke: #1a202c;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* Active glucose pipe fill */
.pipe-fill--glucose {
  stroke: #4299e1;
}

/* Active insulin pipe fill */
.pipe-fill--insulin {
  stroke: #f97316;
}

/* Chevron flow indicators */
.pipe-chevron {
  fill: none;
  stroke: rgba(255, 255, 255, 0.8);
  stroke-width: 2;
  vector-effect: non-scaling-stroke;
  offset-distance: 0%;
  offset-rotate: auto;
  animation: chevronFlow linear infinite;
}

.pipe-chevron--paused {
  animation-play-state: paused;
}

@keyframes chevronFlow {
  from {
    offset-distance: 0%;
  }
  to {
    offset-distance: 100%;
  }
}

/* Suction VFX — particles converging toward pipe intake */
.pipe-suction {
  fill: rgba(66, 153, 225, 0.7);
  animation: suctionPull 1.2s ease-in infinite;
}

.pipe-suction--paused {
  animation-play-state: paused;
}

@keyframes suctionPull {
  0% {
    transform: translate(var(--sx), var(--sy));
    opacity: 0.8;
  }
  60% {
    opacity: 0.5;
  }
  100% {
    transform: translate(0, 0);
    opacity: 0;
  }
}
